<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileToLink | {{ file_name }}</title>
    <link rel="stylesheet" href="https://unpkg.com/sheryjs/dist/Shery.css" />
    <link rel="stylesheet" href="https://biisal.github.io/Resources/StreamCSS.css">
    <link rel="stylesheet" href="https://biisal.github.io/Resources/playerCss.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>

    <style>
        /* ─── Buffering Overlay ─── */
        .buffer-overlay {
            position: absolute;
            inset: 0;
            z-index: 50;
            background: rgba(0, 0, 0, 0.75);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .buffer-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .buffer-overlay dotlottie-player {
            width: 220px;
            height: 220px;
        }

        .buffer-text {
            font-family: 'Josefin Sans', sans-serif;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Keep .main position relative for overlay */
        .main {
            position: relative;
        }

        @media (max-width: 640px) {
            .buffer-overlay dotlottie-player {
                width: 150px;
                height: 150px;
            }

            .buffer-text {
                font-size: 0.7rem;
            }
        }

        /* ─── Loading Screen ─── */
        .loader-wrap {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background: #0a0a0f;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 28px;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loader-wrap.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader-logo {
            font-family: 'Josefin Sans', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .loader-logo span {
            color: #ff003c;
        }

        .loader-spinner {
            display: flex;
            gap: 8px;
        }

        .loader-spinner div {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff003c;
            animation: bounce 1.4s ease-in-out infinite;
        }

        .loader-spinner div:nth-child(2) {
            animation-delay: 0.16s;
        }

        .loader-spinner div:nth-child(3) {
            animation-delay: 0.32s;
        }

        @keyframes bounce {

            0%,
            80%,
            100% {
                transform: scale(0.3);
                opacity: 0.3;
            }

            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .loader-text {
            font-family: 'Josefin Sans', sans-serif;
            font-size: 0.85rem;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* ─── Logo color override ─── */
        #heading span.logo-accent {
            color: #ff003c !important;
        }

        /* ─── Force buttons visible (biisal CSS sets opacity:0) ─── */
        .downloadBtn button,
        .links a,
        .links button {
            opacity: 1 !important;
        }

        /* ─── Remove movie section gap ─── */
        .movie-cont {
            display: none !important;
        }

        /* ─── Hide Shery cursor on mobile ─── */
        @media (max-width: 768px) {

            .mousefollower,
            .Shery-mousefollower,
            #Shery-mouseFollower,
            [class*="mousefollower"],
            [class*="Shery"] {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                pointer-events: none !important;
            }
        }

        /* ─── Better mobile button layout ─── */
        @media (max-width: 640px) {
            .downloadBtn {
                gap: 10px !important;
                padding: 15px 10px !important;
            }

            .downloadBtn button {
                width: 100% !important;
                max-width: 100% !important;
                padding-left: 20px !important;
                font-size: 12px !important;
                height: 45px !important;
            }
        }

        /* ─── Responsive heading ─── */
        @media (max-width: 480px) {
            #heading {
                font-size: 0.78rem !important;
                white-space: nowrap;
            }
        }
    </style>
</head>

<body>
    <!-- ═══ LOADING SCREEN ═══ -->
    <div class="loader-wrap" id="loader">
        <div class="loader-logo"><span>FileToLink</span>Bot</div>
        <div class="loader-spinner">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div class="loader-text">Loading Stream...</div>
    </div>

    <nav>
        <div class="nleft">
            <a href="https://t.me/PikaFileToLinkBot">
                <h3 id="heading" style="z-index: 100;" class="magnet"><span class="logo-accent">FileToLink</span> by
                    <span style="color: #4dabf7;">Team SixtyNine</span>
                </h3>
            </a>
        </div>
        <div class="nryt">
            <a class="home-btn magnet" href="#main" onclick="toggleWidthnav(this)">Home</a>
            <a href="#sec1" class="about-btn magnet" onclick="toggleWidthnav(this)">About</a>
        </div>
    </nav>
    <center>
        <div class="about-nav">
            <a href="#sec1" class="wlcm magnet" onclick="toggleWidth(this)">Welcome</a>
            <a href="#sec2" class="abt-chnl magnet" onclick="toggleWidth(this)">Channels</a>
            <a href="#sec3" class="magnet bot-btn" onclick="toggleWidth(this) , bot_btn_clicked()">Bots</a>
            <a href="#sec4" class="magnet contact-btn" onclick="toggleWidth(this)">Let's Talk</a>
        </div>
    </center>

    <div class="outer">
        <div class="inner">
            <div class="main" id="main">
                {% set is_audio = file_name.lower().endswith(('.mp3', '.wav', '.flac', '.ogg', '.aac', '.m4a', '.wma',
                '.opus')) %}
                {% if is_audio %}
                <div
                    style="padding: 60px 20px; text-align: center; background: linear-gradient(135deg, #0f0f1a, #1a1025); border-radius: 8px; margin-bottom: 10px;">
                    <div
                        style="width:100px;height:100px;border-radius:24px;background:linear-gradient(135deg,#ff003c,#ff4060);display:flex;align-items:center;justify-content:center;font-size:42px;color:#fff;margin:0 auto 24px;box-shadow:0 16px 50px rgba(255,0,60,0.3);">
                        <i class="fa-solid fa-music"></i>
                    </div>
                    <audio id="player" controls preload="metadata" style="width:100%;max-width:600px;">
                        <source src="{{ file_url }}">
                    </audio>
                </div>
                {% else %}
                <video id="player" class="player" src="{{ file_url }}" type="video/mp4" playsinline controls
                    width="100%"></video>
                <div class="player"></div>
                <!-- Buffering Overlay -->
                <div class="buffer-overlay" id="bufferOverlay">
                    <dotlottie-player src="https://lottie.host/5acbda8f-cf37-4592-badc-998cf8b93b3e/BJa7j6NowU.lottie"
                        background="transparent" speed="1" loop autoplay>
                    </dotlottie-player>
                    <div class="buffer-text">Buffering...</div>
                </div>
                {% endif %}
                <div class="file-name">
                    <h4>File name : </h4>
                    <br>
                    <p id="myDiv">{{ file_name }}</p>
                </div>
                <div class="downloadBtn">
                    <button class="magnet" onclick="vlc_player()"><img src="https://i.postimg.cc/15TQ4y7B/vlc.png"
                            alt="">watch in VLC PLAYER</button>
                    <button class="magnet" onclick="mx_player()"><img Src="https://i.postimg.cc/sx4Msv4T/mx.png"
                            alt="">watch in MX PLAYER</button>
                    <button class="magnet" onclick="playit_player()"><img src="https://i.postimg.cc/RVGWYJFF/playit.png"
                            alt="">watch in PLAYit PLAYER</button>
                    <button class="magnet" onclick="km_player()"><img src="https://i.postimg.cc/wT9tFQ9Z/km.png"
                            alt="">watch in KM PLAYER</button>
                    <button class="magnet" onclick="s_player()"><img src="https://i.postimg.cc/XYJr6NGg/s.png"
                            alt="">watch in S PLAYER</button>
                    <button class="magnet" onclick="hd_player()"><img src="https://i.postimg.cc/rFT43LNh/hd.png"
                            alt="">watch in HD PLAYER(4K)</button>
                    <button class="magnet" onclick="bisalDownload()"><img style="height: 35px;"
                            src="https://i.postimg.cc/Zncc9YLq/Pngtree-download-icon-3581467.png" alt="">download video
                    </button>
                </div>

            </div>
            <div class="abt">
                <div class="about">
                    <div class="about-dets">
                        <div class="abt-sec" id="sec1" style="padding: 160px 30px;">
                            <h1 style="text-align: center;">WELCOME TO OUR <span>STREAMING</span> PAGE</h1>
                            <p style="text-align: center; line-height: 2;word-spacing: 2px; letter-spacing: 0.8px;">
                                We're
                                thrilled to have <span>you</span> here.
                                Get ready for an
                                amazing <span>experience</span>
                                filled with <span>entertainment</span>, <span>fun</span>, and <span>surprises</span>.
                                Grab
                                your snacks, sit back, and <span>enjoy</span> the show!
                            </p>
                        </div>
                        <div class="abt-sec" id="sec2">
                            <h1>OUR ALL <span>CHANNELS</span> LIST</h1>
                            <div class="links chnl-link">
                                <a class="magnet" href="https://t.me/Team_SixtyNine"><button> Update Channel
                                    </button></a>
                            </div>
                        </div>
                        <div class="abt-sec" id="sec3">
                            <h1>OUR ALL <span>BOTS</span> LIST</h1>
                            <div class="links bot-link">
                                <a class="magnet" href="https://t.me/PikaFileToLinkBot"><button>FileToLink
                                        Bot</button></a>
                                <a class="magnet" href="https://t.me/TruecallerInfoLookupBot"><button>Truecaller Lookup
                                        Bot</button></a>
                            </div>
                        </div>
                        <div class="abt-sec" id="sec4">
                            <p style="text-align: center;">We Can Talk For Your Support And You Can Report Through
                                Telegram</p>
                            <div class="links contact">
                                <a href="https://t.me/listkiss"><button>Contact</button></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <div class="mid">
                <h1 class="mid-text">VISIT <a href="#sec3" onclick="bot_btn_clicked()"><span>OUR BOTS LIST</span></a>
                    FOR
                    MORE
                    INFO</h1>
            </div>

            <div class="last-text">
                <p style="font-weight: 500;">
                    Welcome To Our Online Streaming Platform! Our Website Allows Users To Generate Streamable Links For
                    Various Files Using Telegram Bots. Please Note That We Are Not Responsible For The Content Shared Or
                    Streamed Through Our Service. Users Are Encouraged To Respect Copyright Laws And Adhere To Our
                    Community
                    Guidelines. Enjoy Easy, Hassle-Free File Streaming.
                </p>
            </div>

            <center>
                <div class="copyright">
                    <h5 class="text-center">Copyright &copy; 2026 <a href="https://t.me/Team_SixtyNine"><span
                                style="font-weight: 700; color: #4dabf7;">Team SixtyNine</span></a>. All
                        Rights Reserved.</h5>
                    <div class="icons">
                        <a href="https://t.me/Team_SixtyNine"><i class="fa-brands fa-telegram fa-lg"></i></a>
                    </div>
                    <h4 style="font-weight: 700;">Made By <a href="https://t.me/listkiss"><span>Shahadat
                                Hassan</span></a></h4>
                </div>
            </center>
        </footer>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.155.0/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/automat/controlkit.js@master/bin/controlKit.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sheryjs/dist/Shery.js"></script>
<script src="https://cdn.plyr.io/3.6.9/plyr.js"></script>
<script src="https://biisal.github.io/Resources/StreamJs.js"></script>

<script>
    // ─── Loading Screen ───
    window.addEventListener('load', function () {
        setTimeout(function () {
            document.getElementById('loader').classList.add('hidden');
        }, 1500);
    });

    // Fallback: hide loader after 4s max
    setTimeout(function () {
        var loader = document.getElementById('loader');
        if (loader) loader.classList.add('hidden');
    }, 4000);

    // ─── External Player Functions ───
    var videoUrl = "{{ file_url }}";

    // Helper: detect platform
    function isAndroid() {
        return /android/i.test(navigator.userAgent);
    }
    function isIOS() {
        return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    }

    // Helper: build Android intent URL
    function androidIntent(pkg) {
        var cleanUrl = videoUrl.replace(/^https?:\/\//, '');
        var scheme = videoUrl.startsWith('https') ? 'https' : 'http';
        return "intent://" + cleanUrl + "#Intent;scheme=" + scheme + ";package=" + pkg + ";type=video/*;end";
    }

    function vlc_player() {
        if (isAndroid()) {
            window.location.href = androidIntent("org.videolan.vlc");
        } else {
            window.location.href = "vlc://" + videoUrl;
        }
    }

    function mx_player() {
        if (isAndroid()) {
            window.location.href = androidIntent("com.mxtech.videoplayer.ad");
        } else {
            window.location.href = videoUrl;
        }
    }

    function playit_player() {
        if (isAndroid()) {
            window.location.href = androidIntent("com.playit.videoplayer");
        } else {
            window.location.href = videoUrl;
        }
    }

    function km_player() {
        if (isAndroid()) {
            window.location.href = androidIntent("com.kmplayer");
        } else {
            window.location.href = videoUrl;
        }
    }

    function s_player() {
        if (isAndroid()) {
            window.location.href = androidIntent("com.onezapp.splayer");
        } else {
            window.location.href = videoUrl;
        }
    }

    function hd_player() {
        if (isAndroid()) {
            window.location.href = androidIntent("com.hdplayer.video");
        } else {
            window.location.href = videoUrl;
        }
    }

    function bisalDownload() {
        window.location.href = videoUrl;
    }

    // ─── Initialize Plyr ───
    {% if not is_audio %}
    const player = new Plyr('#player', {
        controls: ['play-large', 'play', 'progress', 'current-time', 'duration', 'mute', 'volume', 'settings', 'pip', 'fullscreen'],
        settings: ['speed', 'quality'],
        speed: { selected: 1, options: [0.5, 0.75, 1, 1.25, 1.5, 2] },
        keyboard: { focused: true, global: true },
        tooltips: { controls: true, seek: true },
    });

    // ─── Buffering Overlay Logic ───
    var bufferOverlay = document.getElementById('bufferOverlay');
    var videoEl = document.getElementById('player');

    if (videoEl && bufferOverlay) {
        // Show on waiting/stalled
        videoEl.addEventListener('waiting', function () {
            bufferOverlay.classList.remove('hidden');
        });
        videoEl.addEventListener('stalled', function () {
            bufferOverlay.classList.remove('hidden');
        });

        // Hide on playing/canplay
        videoEl.addEventListener('playing', function () {
            bufferOverlay.classList.add('hidden');
        });
        videoEl.addEventListener('canplay', function () {
            bufferOverlay.classList.add('hidden');
        });
        videoEl.addEventListener('seeked', function () {
            bufferOverlay.classList.add('hidden');
        });

        // Initially hidden until video starts loading
        bufferOverlay.classList.add('hidden');
    }
    {% endif %}

    // ─── Shery.js - Desktop Only ───
    function isMobile() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;
    }

    if (!isMobile()) {
        try {
            Shery.mouseFollower({
                skew: true,
                ease: "cubic-bezier(0.23, 1, 0.320, 1)",
                duration: 1,
            });

            Shery.makeMagnet(".magnet", {
                ease: "cubic-bezier(0.23, 1, 0.320, 1)",
                duration: 1,
            });
        } catch (e) {
            console.log("Shery.js:", e);
        }
    }

    // ─── Nav Functions ───
    function toggleWidthnav(el) {
        document.querySelectorAll('.nryt a').forEach(function (a) { a.style.width = ''; });
        el.style.width = 'auto';
    }

    function toggleWidth(el) {
        document.querySelectorAll('.about-nav a').forEach(function (a) { a.style.width = ''; });
        el.style.width = 'auto';
    }

    function bot_btn_clicked() {
        // handled by StreamJs.js
    }

    function getDets() {
        // no-op, movie suggestion removed
    }
</script>

</html>